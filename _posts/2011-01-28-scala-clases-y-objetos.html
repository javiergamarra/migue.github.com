--- 
layout: post
name: scala-clases-y-objetos
title: "Scala: Clases y objetos"
time: 2011-01-28 17:05:00 +01:00
---
Durante esta entrada analizaremos algunas de las características básicas del paradigma orientado a objetos presentes en Scala. Pongámonos manos a la obra:<br /><br />Del mismo modo que en todos los lenguajes orientados a objetos Scala permite la definición de clases en las que podremos añadir métodos y atributos:<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">class MyFirstClass{</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;val a = 1</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">}</span><br /><br />Si deseamos instanciar un objeto de la clase anterior tendremos que hacer uso de la palabra reservada new<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">val v = new MyFirstClass<span class="Apple-tab-span" style="white-space: pre;"> </span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"><br /></span></span><br />En Scala existen dos tipos de variables, <b>vals y vars</b>, que deberemos especificar a la hora de definir las mismas:<br /><br /><ul><li>Se utilizará la palabra reservada val para indicar que es inmutable. Una variable de este tipo es similar al uso de final en Java. Una vez inicializada no se podrá reasignar jamás.</li><li>De manera contraria, podremos indicar que una variable es de clase var, consiguiendo con esto que su valor pueda ser modificado durante todo su ciclo de vida.</li></ul><br />Uno de los principales mecanismos utilizados que garantizan la robustez de un objeto es la afirmación de que su conjunto de atributos (variables de instancia) permanezca constante a lo largo de todo el ciclo de vida del mismo.&nbsp;El primer paso para evitar que agentes externos tengan acceso a los campos de una clase es declarar los mismos como <b>private</b>. Puesto que los campos privados sólo podrán ser accedidos desde métodos que se encuentran definidos en la misma clase, todo el código podría modificar el estado del mismo estará localizado en dicha clase.<br /><br />Por defecto, si no se especifica en el momento de la definición, los atributos y/o métodos, de una clase tienen acceso público. Es decir, <b>public</b> es el cualificador por defecto en <i>Scala</i><br /><br />El siguiente paso será incorporar funcionalidad a nuestras clases; para ello podremos definir métodos mediante el uso de la palabra reservada def:<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">class MyFirstClass{</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;var a = 1</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;def add(b:Byte):Unit={</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span>a += b<span class="Apple-tab-span" style="white-space: pre;">  </span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;}</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">}</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span><br />Una característica importante de los métodos en Scala es que todos los parámetros son inmutables, es decir, <b>vals</b>. Por tanto, si intentamos modificar el valor de un parámetro en el cuerpo de un método obtendremos un error del compilación:<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">def addNotCompile(b:Byte) : Unit = {</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;b = 1 &nbsp;// Esto no compilará puesto que el&nbsp;</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-tab-span" style="white-space: pre;"> </span> &nbsp;// parámetro b es de tipo val</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;a += b</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">}</span><br /><br />Otro aspecto relevante que podemos apreciar en el código anterior es que no es necesario el uso explícito de la palabra <b>return</b>, <i>Scala</i> retornará el valor de la última expresión que aparece en el cuerpo del método. Adicionalmente, si el cuerpo de la función retorna una única expresión podemos obviar la utilización de las llaves.<br /><br />Habitualmente los métodos que presentan un tipo de retorno <b>Unit</b> tienen efectos colaterales, es decir, modifican el estado del objeto sobre el que actúan. Otra forma diferente de llevar a cabo la definición de este tipo de métodos consiste en eliminar el tipo de retorno y el símbolo igual y englobar el cuerpo de la función entre llaves, tal y como se indica a continuación:<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">class MyFirstClass {</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;private var sum = 0</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;def add(b:Byte) { sum += b }</span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">}</span><br /><br />En la siguiente entrada introduciremos el concepto de <b>singleton objects. </b>También intentaré que la apariencia de las entradas sea un poquito más atractiva utilizando el genial servicio ofrecido por <a href="http://pastie.org/">http://pastie.org</a><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/35092134-7001217227409617179?l=miguelinlas3.blogspot.com' alt='' /></div>

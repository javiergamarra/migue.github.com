--- 
layout: post
name: jdt-weaving-service
title: JDT Weaving Service
time: 2009-11-18 21:55:00 +01:00
---
Tal y como comentabamos hace uno o dos posts, algunos equipos como <span style="font-style: italic;">AJDT</span> o <span style="font-style: italic;">Scala IDE</span><span style="font-style: italic;"> </span>construyen el entorno de desarrollo para <span style="font-style: italic;">Eclipse</span> basándose en el servicio de tejido de <span style="font-style: italic;">JDT</span> (<span style="font-style: italic;">JDT Weaving Service</span>).<br /><div style="text-align: justify;"><br />Vamos a realizar un pequeño ejemplo para nuestro lenguaje (ficticio) de programación <span style="font-style: italic;">Demo</span>, que corre sobre la máquina virtual de <span style="font-style: italic;">Java</span>, integrándolo en el modelo <span style="font-style: italic;">JDT</span> (voy a asumir que se disponen de una serie de conocimientos básicos de <span style="font-style: italic;">Eclipse</span>).<br /><br />En primer lugar necesitaremos tener disponibles las siguientes dependencias en nuestro entorno de desarrollo:<br /></div><ul style="text-align: justify;"><li><span style="font-style: italic;">Eclipse</span> 3.5 o superior.<br /></li></ul><ul style="text-align: justify;"><li>AJDT 1.6.4 o superior (http://download.eclipse.org/tools/ajdt/35/update).<br /></li></ul><ul style="text-align: justify;"><li>Servicio JDT de weaving debe estar activado.<br /></li></ul><div style="text-align: justify;"><br />Con el objetivo de facilitar el seguimiento de este pequeño ejemplo creo que será mejor disponer del proyecto desde el principio, por lo que, desde vuestro cliente <span style="font-style: italic;">subversion</span> preferido obteneis una copia de trabajo desde la siguiente dirección:<br /><br /><a href="http://reclipse.googlecode.com/svn/com.blogspot.miguelinlas3.ajdt.demo/trunk/">http://reclipse.googlecode.com/svn/com.blogspot.miguelinlas3.ajdt.demo/trunk/</a><br /><br />(y haceis un <span style="font-style: italic;">Import</span> del proyecto en el <span style="font-style: italic;">Eclipse</span> si habeis obtenido la copia de trabajo desde un cliente externo).<br /><br />Una vez disponemos del proyecto accederemos al archivo <span style="font-style: italic;">plugin.xml</span> y veremos los siguientes puntos de extensión:<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_XFfdslVc5Pw/SwRnDsR1DUI/AAAAAAAABFg/Sdy2DrzeUvM/s1600/weaving-extension-points.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 198px;" src="http://2.bp.blogspot.com/_XFfdslVc5Pw/SwRnDsR1DUI/AAAAAAAABFg/Sdy2DrzeUvM/s320/weaving-extension-points.png" alt="" id="BLOGGER_PHOTO_ID_5405558765874646338" border="0" /></a>Los puntos de extensión <span style="font-weight: bold;">org.eclipse.contribution.weaving.*</span> nos permiten extender el modelo <span style="font-style: italic;">JDT</span>, integrando en él los componentes de nuestro lenguaje.<br /><br />La clase principal es <span style="font-style: italic;">DemoSourceProvider</span>, la cual contribuye al modelo mediante el punto de extensión <span style="font-weight: bold;">org.eclipse.contribution.weaving.jdt.sourcetransformer.<br /><br /></span>El objetivo principal de la clase anterior consiste en traducir nuestro lenguaje (completamente absurdo :) ). Si la definición de un archivo de código fuente de nuestro lenguaje fuese algo como lo siguiente:<br /><br /><span style="font-style: italic;">  name: MyDemo {</span><br /><span style="font-style: italic;">           x: 10</span><br /><span style="font-style: italic;">           y: 5</span><br /><span style="font-style: italic;">          z: 12</span><br /><span style="font-style: italic;">  }</span><br /><br />el traductor intentará convertirlo en algo como lo que sigue:<br /><br /><span style="font-style: italic;">class MyDemo {</span><br /><span style="font-style: italic;">        int x= 10;</span><br /><span style="font-style: italic;">        int y= 5;</span><br /><span style="font-style: italic;">        int z = 12;</span><br /><span style="font-style: italic;">  }</span><br /><span style="font-weight: bold;"><span style="font-weight: bold;"><span style="font-weight: bold;"></span></span></span><br />Intentad darle un vistazo al código (son cuatro clases con muy poco código) y mañana os dejaré un proyecto de ejemplo que haga uso de esta construcción para que veais que realmente se integra nuestro absurdo lenguaje!<br /><br />Hasta pronto!<br /><br /></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/35092134-6007760123155334590?l=miguelinlas3.blogspot.com' alt='' /></div>

--- 
layout: post
name: some-signatures-examples
title: Some signatures examples
time: 2010-04-18 11:05:00 +02:00
---
<div style="text-align: justify;">En la última entrada dedicada a AOP (podeis verla <a href="http://miguelinlas3.blogspot.com/2010/03/aop-pointcuts-definition.html">aquí</a> ) analizamos de manera teórica las características básicas del lenguaje de definición de pointcuts. A continuación realizaremos una serie de ejemplos que intentarán clarificar los conceptos teóricos vistos en anteriores entradas.<br /><div class="titlepage"><div><div><h5 class="title"><br /><ul><li>Signaturas de tipos</li></ul></h5></div></div></div><table border="1" id="d0e1300"><caption>Table&nbsp;1.2.&nbsp;Ejemplos de signaturas de tipos</caption><col width="20%"></col><col width="40%"></col><col width="40%"></col><thead><tr><th>Patrón de la signatura</th><th>Descripción</th><th>Ejemplos de tipos concordantes</th></tr></thead><tbody><tr><td><span class="italic">AstVisitor</span></td><td>El tipo&nbsp;<span class="italic">AstVisitor</span></td><td>Sólo el tipo AstVisitor concuerda (ni tipos base ni derivados)</td></tr><tr><td><span class="italic">*AstVisitor</span></td><td>Cualquier tipo cuyo nombre termine en&nbsp;<span class="italic">AstVisitor</span></td><td>Por ejemplo,&nbsp;<span class="italic">HighlightingAstVisitor</span>&nbsp;o&nbsp;<span class="italic">SemanticAstVisitor</span>&nbsp;concuerdan con el patrón</td></tr><tr><td><span class="italic">java.*.Date</span></td><td>El tipo&nbsp;<span class="italic">Date</span>&nbsp;en cualquier subpaquete directo del paquete java</td><td><span class="italic">java.util.Date</span>&nbsp;o&nbsp;<span class="italic">java.sql.Date</span>&nbsp;son ejemplos de tipos concordantes</td></tr><tr><td><span class="italic">javax..*</span></td><td>Cualquier tipo en el paquete&nbsp;<span class="italic">javax</span>&nbsp;y en sus subpaquetes (tanto directos como indirectos)</td><td>Cualquier tipo en el paquete&nbsp;<span class="italic">javax.security</span>&nbsp;así como cualquiera de sus subpaquetes indirectos como&nbsp;<span class="italic">javax.security.auth.login</span></td></tr><tr><td><span class="italic">javax..*Model</span></td><td>Todos los tipos en el paquete&nbsp;<span class="italic">javax</span>&nbsp;(subpaquetes directos e indirectos) cuyo nombre termine en&nbsp;<span class="italic">Model</span>, y todos los subtipos de estos.</td><td><span class="italic">TableModel</span>,&nbsp;<span class="italic">TreeModel</span>&nbsp;y sus subtipos como&nbsp;<span class="italic">DefaultTreeModel</span>&nbsp;o<span class="italic">DefaultTableModel</span>.</td></tr></tbody></table></div><div style="text-align: justify;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px;"></span></span><br /><div class="titlepage"><div><div><h5 class="title"><br /><br /><ul><li>Signaturas de tipos: anotaciones</li></ul></h5></div></div></div><table border="1" frame="void" id="d0e1429"><caption>Table&nbsp;1.3.&nbsp;Ejemplos de signaturas de tipos:&nbsp;<span class="italic"><span class="bold"><strong>anotaciones</strong></span></span></caption><col width="20%"></col><col width="40%"></col><col width="40%"></col><thead><tr><th>Patrón de la signatura</th><th>Descripción</th><th>Ejemplos de tipos concordantes</th></tr></thead><tbody><tr><td><span class="italic">@Secured User</span></td><td>El tipo&nbsp;<span class="italic">User</span>&nbsp;anotado con la anotación&nbsp;<span class="italic">Secured</span></td><td><span class="italic">@Secured class User</span>{. . .}</td></tr><tr><td><span class="italic">@Entity *</span></td><td>Cualquier tipo anotado con la anotación&nbsp;<span class="italic">Entity</span></td><td><span class="italic">@Entity class Section&nbsp;</span>{. . .},<span class="italic">@Entity class Report</span>&nbsp;{. . .}</td></tr><tr><td><span class="italic">@Transactional* Manager+</span></td><td>El tipo&nbsp;<span class="italic">Manager</span>&nbsp;y cualquiera de sus clases derivadas que estén anotados con una anotación cuyo nombre comience por&nbsp;<span class="italic">Transactional</span></td><td><span class="italic">@TransactionalDefault class Manager</span>{},<span class="italic">@TransactionalOracle class OracleManager extends Manager</span>{}</td></tr></tbody></table><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px;"></span></span><br /><div class="section" title="Signaturas de tipos: generics"><div class="titlepage"><div><div><h5 class="title"><br /><br /><ul><li>Signaturas de tipos:&nbsp;<span class="italic">generics</span></li></ul></h5></div></div></div><table border="1" frame="void" id="d0e1517"><caption>Table&nbsp;1.4.&nbsp;Ejemplos de signaturas de tipos:&nbsp;<span class="italic"><span class="bold"><strong>generics</strong></span></span></caption><col width="20%"></col><col width="40%"></col><col width="40%"></col><thead><tr><th>Patrón de la signatura</th><th>Descripción</th><th>Ejemplos de tipos concordantes</th></tr></thead><tbody><tr><td><span class="italic">Map <integer,string></integer,string></span></td><td>El tipo&nbsp;<span class="italic">Map</span>&nbsp;cuyo primer argumento genérico está fijado a&nbsp;<span class="italic">Integer</span>&nbsp;y el segundo a<span class="italic">String</span></td><td>En este caso únicamente concordará el tipo&nbsp;<span class="italic">Map<integer,string></integer,string></span></td></tr><tr><td><span class="italic">*<user></user></span></td><td>Cualquier tipo genérico cuyo único argumento genérico sea de tipo&nbsp;<span class="italic">User</span></td><td><span class="italic">Collection<user></user></span>,<span class="italic">List<user></user></span>, . . .</td></tr><tr><td><span class="italic">Collection</span></td><td>El tipo&nbsp;<span class="italic">Collection</span>&nbsp;con un parámetro de tipo&nbsp;<span class="italic">User</span>&nbsp;o derivado</td><td><span class="italic">Collection<user></user></span>,&nbsp;<span class="italic">Collection<domainuser></domainuser></span>, . . .</td></tr><tr><td><span class="italic">Collection</span></td><td>El tipo&nbsp;<span class="italic">Collection</span>, cuyo parámetro será uno de los tipos base de&nbsp;<span class="italic">User</span></td><td><span class="italic">Collection<serializable></serializable></span>,&nbsp;<span class="italic">Collection<baseuser></baseuser></span>, asumiendo que,&nbsp;<span class="italic">User</span>&nbsp;extiende o implementa, directa o indirectamente,&nbsp;<span class="italic">Serializable</span>&nbsp;y&nbsp;<span class="italic">BaseUser</span></td></tr></tbody></table></div><div class="section" title="Combinando pointcuts: operadores"><div class="titlepage"><div><div><h5 class="title"><br /><br /><ul><li>Combinando pointcuts: operadores</li></ul></h5></div></div></div><table border="1" frame="void" id="d0e1638"><caption>Table&nbsp;1.5.&nbsp;Signaturas de tipo: operadores</caption><col width="20%"></col><col width="40%"></col><col width="40%"></col><thead><tr><th>Patrón de la signatura</th><th>Descripción</th><th>Ejemplos de tipos concordantes</th></tr></thead><tbody><tr><td><span class="italic">!Collection</span></td><td>Cualquier tipo excepto&nbsp;<span class="italic">Collection</span></td><td><span class="italic">User</span>,<span class="italic">Model</span>,&nbsp;<span class="italic">List</span>&nbsp;(aunque sea subclase de&nbsp;<span class="italic">Collection</span>)</td></tr><tr><td><span class="italic">Set || Map</span></td><td>Los tipos&nbsp;<span class="italic">Set</span>&nbsp;o&nbsp;<span class="italic">Map</span></td><td>Los tipos&nbsp;<span class="italic">Set</span>&nbsp;y&nbsp;<span class="italic">Map</span>&nbsp;únicamente</td></tr><tr><td><span class="italic">!@Transactional</span></td><td>Cualquier tipo que se encuentre anotado por la anotación&nbsp;<span class="italic">Transactional</span></td><td><span class="italic">class NonTransactionalManager</span>{}</td></tr><tr><td><span class="italic">@Serializable @Encrypted *</span></td><td>Cualquier tipo que se encuentre anotado por las dos anotaciones</td><td><span class="italic">@Serializable @Encrypted class UserCredentials</span>{}</td></tr><tr><td><span class="italic">(@Serializable || @Encrypted) *</span></td><td>Cualquier tipo que esté anotado por alguna de las dos anotaciones</td><td><span class="italic">@Serializable class User&nbsp;</span>{}</td></tr></tbody></table></div><div class="section" title="Signaturas de métodos y constructores"><div class="titlepage"><div><div><h5 class="title"><br /><br /><ul><li>Signaturas de métodos y constructores</li></ul></h5></div></div></div><table border="1" frame="void" id="d0e1755"><caption>Table&nbsp;1.6.&nbsp;Signaturas de métodos</caption><col width="20%"></col><col width="40%"></col><col width="40%"></col><thead><tr><th>Patrón de la signatura</th><th>Descripción</th><th>Ejemplos de métodos concordantes</th></tr></thead><tbody><tr><td><span class="italic">public void User.set*(*)</span></td><td>Cualquier método público de la clase&nbsp;<span class="italic">User</span>&nbsp;cuyo nombre comience por&nbsp;<span class="italic">set</span>, cuyo tipo de retorno sea&nbsp;<span class="italic">void</span>, y que espere un único argumento</td><td>class User{ public void setName(String name){} }</td></tr><tr><td>public void User.*()</td><td>Cualquier método público de la clase&nbsp;<span class="italic">User</span>&nbsp;cuyo tipo de retorno sea&nbsp;<span class="italic">void</span>&nbsp;y que no espere argumentos</td><td>class User { public void updateInfo(){}}</td></tr><tr><td>public * User.*()</td><td>Cualquier método público de la clase&nbsp;<span class="italic">User</span>&nbsp;que no espera argumentos y retorna cualquier tipo</td><td>class User{ public UserInfo getUserInfo(){}}</td></tr><tr><td>public * User.*(..)</td><td>Cualquier método público de la clase&nbsp;<span class="italic">User</span>&nbsp;que retorna cualquier tipo, y espera cualquier número y tipo de argumentos (incluido cero)</td><td>class User{ public UserInfo getUserInfo(){},public Date updatesBetween(Date first,Date last){}}</td></tr><tr><td><span class="italic">* *.*(..) o * * (..)</span></td><td>Cualquier método independientemente de su tipo, del tipo de retorno, de su nombre y de los argumentos que espere</td><td>Cualquier método del sistema</td></tr><tr><td><span class="italic">!public * User.*(..)</span></td><td>Cualquier método que no sea público (privado,protegido o paquete)</td><td>class User {protected getUserInfo(){}}</td></tr><tr><td><span class="italic">* * (..) throws Recognition Exception</span></td><td>Cualquier método que declare que puede lanzar una excepción de tipo<span class="italic">RecognitionException</span></td><td><span class="italic">class AntlRBasedParser { public void parser(String file) throws RecognitionException}</span></td></tr><tr><td>* User+.*(..)</td><td>Cualquier método en la clase&nbsp;<span class="italic">User</span>&nbsp;y sus subclases</td><td><span class="italic">class UserDetails extends User</span>&nbsp;{}</td></tr><tr><td><span class="italic">User UserService.*(..)</span></td><td>Cualquier método del tipo&nbsp;<span class="italic">UserService</span>&nbsp;cuyo tipo de retorno sea&nbsp;<span class="italic">User</span>. Si alguna de las subclases sobrescribe el tipo de retorno con un subtipo de&nbsp;<span class="italic">User</span>&nbsp;(mediante el tipo de retorno covariante introducido en Java 5) también será seleccionado.</td><td>class UserService{public User retrieveUser(String name){}} class DetailUserService extends UserService{public DetailedUser retrieveUser(String name){}}</td></tr></tbody></table><br />La signatura en el caso de los constructores difiere de la signatura de métodos en los siguientes aspectos:<br /><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Los constructores no tienen tipo de retorno por lo que no se permite utilizar el valor de retorno en la especificación de un&nbsp;<span class="italic">pointcut</span>&nbsp;de este tipo.</li><li class="listitem">Dado que los nombres de los constructores no pueden ser libres (tienen que utilizar el mismo nombre de la clase), la parte de la signatura destinada al nombre será sustituida con la palabra&nbsp;<span class="italic">new</span>.</li><li class="listitem">Por último, puesto que los constructores no pueden ser estáticos, no se podrá utilizar la palabra reservada&nbsp;<span class="italic">static</span></li></ul><ul class="itemizedlist" type="disc"><li><span class="Apple-style-span" style="font-size: 13px; font-weight: bold;">Signaturas de campos</span></li></ul></div></div><div class="section" title="Signaturas de campos"><div class="titlepage"><div><div><h5 class="title"><a href="http://www.blogger.com/post-create.g?blogID=35092134" id="d0e1937" xmlns:saxon="http://icl.com/saxon"></a></h5></div></div></div><table border="1" frame="void" id="d0e1942"><caption>Table&nbsp;1.7.&nbsp;Signaturas de campos de clase</caption><col width="20%"></col><col width="40%"></col><col width="40%"></col><thead><tr><th>Patrón de la signatura</th><th>Descripción</th><th>Ejemplos de campos concordantes</th></tr></thead><tbody><tr><td><span class="italic">private String User.username</span></td><td>Campo privado (tanto campo de una instancia como estático) de la clase&nbsp;<span class="italic">User</span></td><td>class User { private String username;}</td></tr><tr><td>* User.*</td><td>Cualquier campo de la clase&nbsp;<span class="italic">User</span>&nbsp;independiente de sus calificadores, tipo y nombre.</td><td>class User{private String username;protected int credits;private UserDetails details;}</td></tr><tr><td>* User+.*</td><td>Cualquier campo de la clase&nbsp;<span class="italic">User</span>&nbsp;y todas sus subclases, independientemente de sus calificadores, tipo y nombre.</td><td>El ejemplo de la fila anterior o&nbsp;<span class="italic">class SpecificUser extends User {private String address;</span>}</td></tr></tbody></table></div><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px;"><br /></span></span></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/35092134-4314061961029496737?l=miguelinlas3.blogspot.com' alt='' /></div>

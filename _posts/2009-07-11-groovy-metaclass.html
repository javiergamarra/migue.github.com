--- 
layout: post
name: groovy-metaclass
title: Groovy Metaclass
time: 2009-07-11 11:29:00 +02:00
---
One of my favourites Groovy´s features is its MOP architecture. It allow us introducing new methods at runtime thanks to the <a href="http://groovy.codehaus.org/MetaClass+Redesign+(by+blackdrag)">metaClass</a>.<br /><br />We can define a new class<div><br /></div><div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">class SampleClass {</span></span></b></div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">   // class field</span></span></b></div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">   def propertyOne</span></span></b></div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">   // one sample Closure</span></span></b></div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">   def closureOne = {</span></span></b></div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">       println "I´m the closure one"</span></span></b></div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">   }</span></span></b></div><div style="text-align: justify;"><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">}</span></span></b></div><div><br /></div><div><div>Now we add a new method at runtime</div><div><br /></div><div><span class="Apple-style-span"  style="color:#3333FF;"><b><span class="Apple-style-span"  style="font-family:'courier new';">SampleClass.metaClass.runtimeAddedMethod = {</span></b></span></div><div><span class="Apple-style-span"  style="color:#3333FF;"><b><span class="Apple-style-span"  style="font-family:'courier new';">    println "I´m runtimeAddedMethod"</span></b></span></div><div><span class="Apple-style-span"  style="color:#3333FF;"><b><span class="Apple-style-span"  style="font-family:'courier new';">}</span></b></span></div><div><br /></div><div>Declare a new instance an test all the methods</div><div><div><br /></div><div><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">def instance = new SampleClass()</span></span></b></div><div><br /></div><div>Call to the closure declared in class definition</div><div><br /></div><div><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">instance.closureOne()</span></span></b></div><div><br /></div><div><div>Call to the method added at runtime</div><div><br /></div><div><span class="Apple-style-span"  style="color:#3333FF;"><b><span class="Apple-style-span"  style="font-family:'courier new';">instance.runtimeAddedMethod()</span></b></span></div><div><br /></div><div><div>We add a method to the "instance" too</div><div><br /></div><div><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">instance.metaClass.instanceRuntimeAddedMethod = { </span></span></b></div><div><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">    println "I´m the method added at runtime to a single instance"</span></span></b></div><div><b><span class="Apple-style-span"  style="color:#3333FF;"><span class="Apple-style-span"  style="font-family:'courier new';">}</span></span></b></div><div><span class="Apple-style-span"  style="color:#3333FF;"><br /></span></div><div><b><span class="Apple-style-span"  style="font-family:'courier new';"><span class="Apple-style-span"  style="color:#3333FF;">instance.instanceRuntimeAddedMethod()</span></span></b></div><div><br /></div><div>Bye!!</div></div></div></div></div></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/35092134-3855604996510087299?l=miguelinlas3.blogspot.com' alt='' /></div>
